<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Synapse Registration Token Manager</title>
        <link rel="icon" type="image/x-icon" href="./favicon.ico" />
        <link href="./bootstrap/bootstrap.min.css" rel="stylesheet" />
        <link href="./style.css" rel="stylesheet" />
        <link href="./fontawesome/css/fontawesome.min.css" rel="stylesheet" />
        <link href="./fontawesome/css/solid.min.css" rel="stylesheet" />
    </head>

    <body class="d-flex flex-column h-100">
        <nav class="navbar navbar-expand-lg bg-light">
            <div class="container-fluid">
                <button
                    class="navbar-toggler"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent"
                    aria-controls="navbarSupportedContent"
                    aria-expanded="false"
                    aria-label="Toggle navigation"
                >
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" aria-current="page" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="about.html">About</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
        <div class="container mt-5">
            <div class="row">
                <div class="col">
                    <h1>Synapse Registration Token Manager</h1>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <p>
                        The page is hosted with GitHub Pages. You can read their Privacy Policy
                        <a
                            href="https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement"
                            target="_blank"
                            rel="noopener noreferrer"
                            >here</a
                        >.
                    </p>
                    <p>
                        Your server domain and the access token are stored in your browser's local storage. No data is
                        ever sent to the server at <code><span id="current-url"></span></code>.
                    </p>
                    <p>
                        Get your access token from Element settings <i class="fa-solid fa-arrow-right"></i> Help & About
                        <i class="fa-solid fa-arrow-right"></i> Access Token. Your account must be an admin in Synapse.
                    </p>
                    <p>
                        To use registration tokens, you must enable the feature in Synapse by setting the
                        <code>registration_requires_token: true</code> config option.
                    </p>
                    <p>
                        The Synapse documentation for registration tokens is
                        <a
                            href="https://matrix-org.github.io/synapse/latest/usage/administration/admin_api/registration_tokens.html"
                            target="_blank"
                            rel="noopener noreferrer"
                            >here</a
                        >.
                    </p>
                    <p>
                        Find the source code on
                        <a
                            href="https://github.com/Twi1ightSparkle/synapse-reg-token-mgr"
                            target="_blank"
                            rel="noopener noreferrer"
                            >GitHub</a
                        >.
                    </p>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <h4>Registration token objects</h4>
                    <ul>
                        <li><b>Token:</b> The token which can be used to authenticate registration.</li>
                        <li>
                            <b>Uses allowed:</b> The number of times the token can be used to complete a registration
                            before it becomes invalid.
                        </li>
                        <li>
                            <b>Pending uses:</b> The number of pending uses the token has. When someone uses the token
                            to authenticate themselves, the pending counter is incremented so that the token is not used
                            more than the permitted number of times. When the person completes registration, the pending
                            counter is decremented, and the successful counter is incremented.
                        </li>
                        <li>
                            <b>Successful registrations:</b> The number of times the token has been used to complete the
                            registration successfully.
                        </li>
                        <li><b>Expiration time:</b> The latest time the token is valid.</li>
                    </ul>
                </div>
            </div>

            <div class="row">
                <div class="col">
                    <h4>Credits</h4>
                    <ul>
                        <li>
                            Icons by
                            <a href="https://fontawesome.com/" target="_blank" rel="noopener noreferrer"
                                >Font Awesome</a
                            >
                            used under the terms of
                            <a
                                href="https://creativecommons.org/licenses/by/4.0/"
                                target="_blank"
                                rel="noopener noreferrer"
                                >CC BY 4.0 License</a
                            >.
                        </li>
                        <li>
                            Theme by
                            <a href="https://getbootstrap.com/" target="_blank" rel="noopener noreferrer">Bootstrap</a>
                            used under the terms of
                            <a
                                href="https://github.com/twbs/bootstrap/blob/main/LICENSE"
                                target="_blank"
                                rel="noopener noreferrer"
                                >MIT License</a
                            >.
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <script src="./bootstrap/bootstrap.bundle.min.js"></script>
        <script type="text/javascript">
            window.onload = function () {
                document.querySelector('#current-url').textContent = window.location.host;
            };
        </script>
    </body>
</html>
